// Generated by CoffeeScript 1.3.3
(function() {
  var common, ldap, ldapRiak;

  common = require('./common');

  ldap = require('ldapjs');

  ldapRiak = require('ldapjs-riak');

  module.exports = {
    start_server: function(info) {
      var backend, server;
      server = ldap.createServer();
      backend = ldapRiak.createBackend({
        bucket: {
          name: "ldapless_riak"
        },
        log4js: common.logger
      }, uniqueIndexBucket({
        name: "ldapless_riak_indexes"
      }), {
        indexes: {
          email: true,
          cn: false,
          sn: false
        },
        client: {
          url: "http://localhost:8098",
          retry: {
            retries: 3,
            factor: 2,
            minTimeout: 1000,
            maxTimeout: 10000
          }
        }
      });
      server.add(SUFFIX);
      return server.listen(1389, function() {
        return console.log('LDAP server is up at: %s', server.url);
      });
    }
  };

}).call(this);
